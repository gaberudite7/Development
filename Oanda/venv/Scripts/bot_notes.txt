Your bot will place a trade when ALL of the following conditions are true:

ğŸŸ© Condition 1 â€” A candle closes for the pair

Your CandleManager detects a new closed candle:

triggered = self.candle_manager.update_timings()


So the bot only checks for trades on candle close.

ğŸŸ© Condition 2 â€” Market spread is acceptable

Inside your technicals, it likely checks:

current_spread <= maxspread


If spread is too high: NO TRADE

ğŸŸ© Condition 3 â€” Signal produced based on n_ma and n_std

Your bot computes:

âœ” MA Signal

Using n_ma:

MA trending up â†’ BUY signal

MA trending down â†’ SELL signal

âœ” Volatility Breakout Signal

Using n_std:

price > (MA + n_std * std) â†’ BUY

price < (MA - n_std * std) â†’ SELL

This means:

A breakout beyond your volatility bands (or whatever rule you coded) produces the BUY or SELL signal.

The bot creates a TradeDecision only if:

signal != defs.NONE

ğŸŸ© Condition 4 â€” Gain must be >= mingain

Your calculated TP/SL "gain" value must be bigger than mingain.

If:

gain < mingain


â†’ NO TRADE

This is EXACTLY why your old parameters gave you errors.
The gain was microscopic.

ğŸŸ© Condition 5 â€” Oanda accepts the distances

Your bot attempts to place:

SL price
TP price


Oanda must accept:

minimum distance

valid price formatting

margin availability

If Oanda rejects the order â†’ your place_trade() receives None.

â­ PART 3 â€” Full Example of a Trade Triggering

Letâ€™s walk through an example using GBP/USD with aggressive settings:

n_ma = 1
n_std = 1.0
maxspread = 0.0020
mingain = 0.0006
riskreward = 0.8

â³ Candle closesâ€¦

Your CandleManager triggers GBP/USD.

1ï¸âƒ£ Spread Check Passed

Current spread = 0.0009
maxspread = 0.0020
â†’ OK

2ï¸âƒ£ Technical Signal Fires

On the last candle:

price closed above MA(1)

price jumped outside the upper volatility band (MA + 1.0 * std)

This generates:

signal = BUY
gain = 0.0007   (bigger than mingain=0.0006)

3ï¸âƒ£ Bot builds TradeDecision()

The function sets:

sl = entry_price - 0.0007
tp = entry_price + (0.0007 * riskreward)


â†’ With riskreward = 0.8:

tp_distance = 0.00056


Both distances are above Oanda minimum.

4ï¸âƒ£ trade_is_open â†’ none open â†’ valid
5ï¸âƒ£ Position sizing

Bot calls:

get_trade_units(...)


and computes units based on trade_risk.

6ï¸âƒ£ Bot calls Oanda
trade_id = api.place_trade(...)


Oanda accepts:

spread okay

SL/TP far enough

order formatted correctly

Returns a real trade ID.

7ï¸âƒ£ Bot logs:
Placed trade_id: 193124 -> GBP_USD BUY

â­ Summary: When a trade happens

A trade occurs only when ALL of these are true:

A new candle closes

Spread â‰¤ maxspread

Trend/volatility logic gives a BUY/SELL

Gain â‰¥ mingain

SL/TP distances are valid for Oanda

Position sizing is valid

The pair has no open trade already

Then your bot places the trade.